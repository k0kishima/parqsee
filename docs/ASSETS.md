# Asset Management & Build Worflow

This document describes how to manage application assets such as icons and installer backgrounds.

## App Icon Generation

The application icon source is located at `backend/icons/source_icon.png`.
This 1024x1024 PNG file is the source of truth for all platform-specific icons generated by Tauri.

### Updating the Icon

1.  **Replace the Source File**:
    Overwrite `backend/icons/source_icon.png` with your new 1024x1024 image.

2.  **Apply macOS Style (Squircle & Padding)**:
    Since Tauri does not automatically apply the standard macOS rounded square (squircle) shape, and raw square icons may look too large ("floating"), we use a Python script to preprocess the icon.
    
    This script will:
    - Resize the icon content to 90% (adding transparent padding).
    - Apply a Squircle mask.

    ```bash
    # Run from project root
    python3 scripts/apply_squircle.py
    ```

3.  **Generate Platform Assets**:
    Use the Tauri CLI to generate all required icon sizes (icns, ico, png) from the processed source.

    ```bash
    cd frontend
    pnpm tauri icon ../backend/icons/source_icon.png
    ```

4.  **Rebuild Backend (Mac only)**:
    macOS caches app icons aggressively. To force the new icon to appear in the Dock and App Switcher (Cmd+Tab), you may need to clean the build cache.

    ```bash
    cd backend
    cargo clean -p parqsee
    # Rerun dev server
    cd ..
    pnpm tauri dev
    ```

## DMG Installer Background

> **Note**: For Mac App Store distribution, a custom DMG background is **NOT required**. 
> Apps distributed via the App Store are installed automatically and do not show an installer window.

If you are distributing the app independently (outside the App Store) and wish to restore the DMG background:
1.  Place your background image at `backend/background.png`.
2.  Uncomment/Add the `dmg` configuration block in `backend/tauri.conf.json`.

```json
"bundle": {
  "dmg": {
    "background": "./background.png",
    "windowSize": { "width": 660, "height": 400 },
    "appPosition": { "x": 180, "y": 170 },
    "applicationFolderPosition": { "x": 480, "y": 170 }
  }
}
```
